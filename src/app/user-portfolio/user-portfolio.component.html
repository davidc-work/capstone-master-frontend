<div class="scroll">



  <div style="text-align: center; margin-top: 50px;">
    <h1 *ngIf="view === 'Account'">My Account</h1>
    <h1 *ngIf="view === 'Billing'">My Wallet</h1>
    <div class="nav-buttons">
      <button (click)="view = 'Account'" [ngClass]="view == 'Account' ? 'selected' : ''">Account</button>
      <button (click)="view = 'Billing'" [ngClass]="view == 'Billing' ? 'selected' : ''">Wallet</button>
    </div>
  </div>
  <div [ngSwitch]="view">
    <div *ngSwitchCase="'Account'">
      <app-account-settings *ngIf="edit" [notificationComponent]="notificationComponent" [id]="userData.customer_id" [data]="userData.ClientProfile" (update)="refreshPage($event)" (editProfile)="editProfile()"></app-account-settings>

      <div *ngIf="!edit" class="profile-container">
        <div class="profile-alignment">
          <div class="profile-avatar">
            <img src="../../assets/img/userprofile/profile.png" alt="" />
            <p>{{userData?.ClientProfile.firstName}}</p>
            <p>{{userData?.ClientProfile.email}}</p>
          </div>
          <div class="profile-info-editable">
            <div><p>First name: </p><input disabled=true value={{userData?.ClientProfile.firstName}}/></div>
            <div><p>Last name: </p><input disabled=true value={{userData?.ClientProfile.lastName}}/></div>
            <div><p>Email: </p><input disabled=true value={{userData?.ClientProfile.email}}/></div>
            <div><p>Birthdate: </p><input disabled=true value={{userData?.ClientProfile.birthdate}} type="date"/></div>
            <div class="button-container">
              <button (click)="editProfile()" class="button-boxy-1 grey">Edit</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <app-billing [userData]="userData" *ngSwitchCase="'Billing'"></app-billing>
  </div>

  <div class="divider-2"></div>

  <div class="total-container">
    <p>Total Asset Value</p>
    <p id="total-asset-value">{{totalAssetValue!}}</p>
  </div>
  <div class="profile-container">

    <app-sellingfund (cancel)="toSell($event)" [userData]="userData" [notificationComponent]="notificationComponent" [portfolioSell]="portfolioSell" *ngIf="sell"></app-sellingfund>

  
    <table *ngIf="!sell">
      <tr>
        <button (click)="chosenFilter('name')"><th scope="">Name
            <img 
            [ngClass]="arrow[0] ? 'filter-button' : 'filter-button-flip' "
            src="../../assets/img/down-arrow.png" alt="" />
        </th>
      </button>
      
      <button (click)="chosenFilter('ticker')">
        <th scope="">Ticker
            <img
             [ngClass]="arrow[1] ? 'filter-button' : 'filter-button-flip' "
              src="../../assets/img/down-arrow.png" alt="" />
        </th>
      </button>

      <button (click)="chosenFilter('assetClass')">
        <th scope="">Asset Class
            <img
             [ngClass]="arrow[2] ? 'filter-button' : 'filter-button-flip' "
              src="../../assets/img/down-arrow.png" alt="" />
        </th>
      </button>
      <button (click)="chosenFilter('price')">
        <th scope="">Price
            <img [ngClass]="arrow[3] ? 'filter-button' : 'filter-button-flip' " src="../../assets/img/down-arrow.png" alt="" />
        </th>
      </button>
      <button (click)="chosenFilter('quantity')">
        <th scope="">Quantity
            <img [ngClass]="arrow[4] ? 'filter-button' : 'filter-button-flip' " src="../../assets/img/down-arrow.png" alt="" />
        </th>
      </button>
      <button (click)="chosenFilter('total')">
        <th scope="">Total
            <img 
            [ngClass]="arrow[5] ? 'filter-button' : 'filter-button-flip' " src="../../assets/img/down-arrow.png" alt="" />
        </th>
      </button>
      <button>
        <th  class="sell-button" scope="">Sell</th>
      </button>
      </tr>
      <tr *ngFor="let portfolio of userPortfolio" class="portfolio-row">
        <td class="table-content">
          <a href="/receipts/{{userData?.customer_id}}/{{portfolio.fundKey}}">{{portfolio.fundData.name}}</a>
        </td>
        <td class="table-content">{{portfolio.fundData.ticker}}</td>
        <td class="table-content">{{portfolio.fundData.assetClass}}</td>
        <td class="table-content">{{addComma(portfolio.fundData.price)}}</td>
        <td class="table-content">{{addComma(portfolio.quantity)}}</td>
        <td class="table-content">${{addComma((portfolio.quantity*portfolio.fundData.price.substring(1)).toFixed(2))}}</td>
        <td class="table-content">
          <button (click)="toSell(portfolio)">Sell</button>
        </td>
      </tr>
    </table>
  </div> 
  </div>
